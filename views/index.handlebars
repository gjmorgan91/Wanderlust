<!DOCTYPE html>
<html>
  <head>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- FontAwesome CSS -->
	   <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-3dkvEK0WLHRJ7/Csr0BZjAWxERc5WH7bdeUya2aXxdU= sha512-+L4yy6FRcDGbXJ9mPG8MT/3UCDzwR9gPeyFNMCtInsol++5m3bk2bXWKdZjvybmohrAsn3Ua5x8gfLnbE1YkOg==" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="css/map.css">

  </head>
  <body>
    <div class="search container">
      <div class="row justify-content-center">
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
          Departing from <button class="btn btn-default" type="submit">SAN</button>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
          Trips under
          <div class="dropdown" style="display:inline-block;">
            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">$500
            <span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li><a href="#">$800</a></li>
              <li><a href="#">$1500</a></li>
              <li><a href="#">$2100+</a></li>
            </ul>
          </div>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
          Leaving within
          <div class="dropdown" style="display:inline-block;">
            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">1 week
            <span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li><a href="#">2 weeks</a></li>
              <li><a href="#">1 month</a></li>
              <li><a href="#">2 months+</a></li>
            </ul>
          </div>
        </div>
        </div>
      </div>
    </div>
    <div id="map"></div>
    <script>
      var map;
      function initMap() {
        var infowindow = new google.maps.InfoWindow(); /* SINGLE */
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          minZoom: 3,
          center: new google.maps.LatLng(20,-28),
          mapTypeId: 'roadmap'
        });

        // Create a <script> tag and set the USGS URL as the source.
        var script = document.createElement('script');

        script.src = 'js/airports.js';
        document.getElementsByTagName('head')[0].appendChild(script);

        function placeMarker(pin) {
          var coords = pin.coordinates;
          var price = pin.price;
          var latLng = new google.maps.LatLng(coords[0],coords[1]);
          var marker = new google.maps.Marker({
            position: latLng,
            map: map
          });
          google.maps.event.addListener(marker, 'click', function(){
            infowindow.close(); // Close previously opened infowindow
            // generate URL to Google Flights for relevant search query
            infowindow.setContent( "<div id='infowindow'>"+ pin.place +"</div>" + "<a target='_blank' href='https://www.google.com/flights/#search;f=" + "SAN" + ";t=" + pin.iata + ";d=" + "2017-07-01" + ";tt=o" + ";mp=" + pin.price + "'>Buy Tickets Now!</a>");

            infowindow.open(map, marker);
          });
        }
        // Loop through the results array and place a marker for each
        // set of coordinates.
        window.eqfeed_callback = function(results) {
          for (var i = 0; i < results.airports.length; i++) {
            placeMarker(results.airports[i]);
          }
        }
      }

      // google.maps.event.addDomListener(window, 'load', initMap);
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDjVZNsDc_7NkRipjobreGbkhw8Dej6ETk&callback=initMap">
    </script>
    <!-- <script src="js/getFlights.js" type="text/javascript"></script> -->
    <!-- JQuery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  </body>
</html>
